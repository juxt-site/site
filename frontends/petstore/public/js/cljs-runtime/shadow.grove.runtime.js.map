{"version":3,"sources":["shadow/grove/runtime.cljs"],"mappings":";AAKA,GAAA,QAAAA,mCAAAC,yCAAAC,iDAAAC;AAAA;AAAA,AAAA,AAASC,0CAAmB,6CAAA,7CAACC;;AAE7B,kCAAA,lCAAMC,4EAAMC;AAAZ,AACE,IAAAC,oBAAK,AAACH,6CAAKE;AAAX,AAAA,oBAAAC;AACK,OAAA,sHAAA,AAAAC,gBAAOF;;AADZC;;;AAGF,GAAA,QAAAR,mCAAAC,yCAAAC,iDAAAQ;AAAA;AAAA,AAAA,AAASC,8BAAO,6CAAA,7CAACN;;AAEjB,+BAAA,/BAAMO;AAAN,AACE,OAACC,mDAAMF,4BAAOG;;AAEhB,iCAAA,jCAAMC,0EAAWC;AAAjB,AAEE,OAACC,oBAAuBD","names":["js/shadow","js/shadow.grove","js/shadow.grove.runtime","js/shadow.grove.runtime.known-runtimes-ref","shadow.grove.runtime/known-runtimes-ref","cljs.core.atom","shadow.grove.runtime/ref?","x","and__5043__auto__","cljs.core/deref","js/shadow.grove.runtime.id-seq","shadow.grove.runtime/id-seq","shadow.grove.runtime/next-id","cljs.core.swap_BANG_","cljs.core/inc","shadow.grove.runtime/next-tick","callback","js/goog.async.nextTick"],"sourcesContent":["(ns shadow.grove.runtime\n  (:require\n    [goog.async.nextTick]\n    [shadow.grove.protocols :as gp]))\n\n(defonce known-runtimes-ref (atom {}))\n\n(defn ref? [x]\n  (and (atom x)\n       (::rt @x)))\n\n(defonce id-seq (atom 0))\n\n(defn next-id []\n  (swap! id-seq inc))\n\n(defn next-tick [callback]\n  ;; FIXME: should be smarter about when/where to schedule\n  (js/goog.async.nextTick callback))\n"]}