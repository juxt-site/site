{"version":3,"sources":["ajax/util.cljc"],"mappings":";AAQA;;;wBAAA,xBAAMA,wDAEHC;AAFH,AAGE,MAAO,KAAAC,MACE,4CAAKD;;AAEhB,6BAAA,7BAAME,kEAA0BC;AAAhC,AACE,IAAAC,mBAAI,6CAAA,7CAACC,oCAAwBF;AAA7B,AAAA,oBAAAC;AAAAA;;AAAA;;;AAEF;;;;;;;2BAAA,3BAAME,8DAMHC;AANH,AAOYA;;AAMZ;;;0CAAA,iFAAA,WAAA,WAAA,WAAA,YAAA,WAAA,WAAA,9LAAKC;AAaL;;;2BAAA,3BAAMC,8DAEHC;AAFH,AAGE,OAACC,0BAAUH,wCACAE","names":["ajax.util/throw-error","args","js/Error","ajax.util/get-content-type","response","or__5045__auto__","ajax.protocols/-get-response-header","ajax.util/to-utf8-writer","to-str","ajax.util/successful-response-codes-set","ajax.util/success?","status","cljs.core/contains?"],"sourcesContent":["(ns ajax.util\n  \"Short utility functions. A lot of these only exist because the \n   cross platform implementation is annoying.\"\n   (:require [ajax.protocols :as pr])\n   #? (:clj\n       (:import [java.io OutputStreamWriter]\n                [java.lang String])))\n\n(defn throw-error \n  \"Throws an error.\"\n  [args]\n  (throw (#?(:clj Exception. :cljs js/Error.)\n           (str args))))\n\n(defn get-content-type ^String [response]\n  (or (pr/-get-response-header response \"Content-Type\") \"\"))\n\n(defn to-utf8-writer \n  \"Takes a function that converts to a string and transforms it\n   into a function that converts to an object that will write\n   UTF-8 to the wire. Note that this is the identity function\n   for JavaScript because the underlying implementations take\n   a string.\"\n  [to-str]\n  #? (:cljs to-str\n      :clj (fn write-utf8 [stream params]\n             (doto (OutputStreamWriter. stream)\n               (.write ^String (to-str params))\n               (.flush)))))\n\n(def successful-response-codes-set\n  \"A set of successful response types derived from `goog.net.HttpStatus.isSuccess`.\"\n  ;; Factoid: Closure considers some 2XX status codes to *not* be successful, namely\n  ;; 205 Reset Content, 207 Multi Status & the unspecified 208+ range\n  #{200    ;; Ok\n    201    ;; Created\n    202    ;; Accepted\n    204    ;; No Content\n    206    ;; Partial Content\n    304    ;; Not Modified\n    ;; See https://github.com/google/closure-library/blob/f999480c4005641d284b86d82d0d5d0f05f3ffc8/closure/goog/net/httpstatus.js#L89-L94\n    1223}) ;; QUIRK_IE_NO_CONTENT\n\n(defn success? \n  \"Indicates whether an HTTP status code is considered successful.\"\n  [status]\n  (contains? successful-response-codes-set\n             status))\n"]}