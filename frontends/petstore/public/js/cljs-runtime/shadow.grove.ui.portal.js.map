{"version":3,"sources":["shadow/grove/ui/portal.cljs"],"mappings":";AAKA,AAAA,AAEA,AAAA;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,kFAAAA,lFAASK;;AAAT,CAAA,AAAA,yGAAA,zGAASA,oHAEKK,MAAiBC;;AAF/B,AAAA,gBAAA,ZAEcD;AAFd,AAGI,SAAK,iBAAWE,hBAAWD,wDACtB,CAAYH,oBAAS,AAAYG;;;AAJ1C,CAAA,AAAA,wGAAA,xGAASN,mHAMKK,MAAiBC;;AAN/B,AAAA,gBAAA,ZAMcD;AANd,AAOI,OAACG,uCAAWJ,YAAK,AAAQE;;;AAP7B,CAAA,AAAA,oGAAA,pGAASN,+GASMK,MAAKI,OAAOC;;AAT3B,AAAA,gBAAA,ZASeL;AATf,AAUI,wEAAA,jEAACM,qCAAcP,YAAKD;;;AAVxB,CAAA,AAAA,mGAAA,nGAASH,8GAYKK;;AAZd,AAAA,gBAAA,ZAYcA;AAZd,AAaI,OAACO,oCAAaR;;;AAblB,CAAA,AAAA,2GAAA,3GAASJ,sHAeQK;;AAfjB,AAAA,gBAAA,ZAeiBA;AAfjB,AAgBI,OAACQ,4CAAgBT;;;AAhBrB,CAAA,AAAA,uGAAA,vGAASJ,kHAkBIK,MAAcS;;AAlB3B,AAAA,gBAAA,ZAkBaT;AAlBb,AAoBI,2DAAA,pDAACU,wCAAYX;;;AApBjB,CAAA,6CAAA,7CAASJ;AAAT,AAAA,AAAA;;;AAAA,CAAA,mDAAA,nDAASA;;AAAT,CAAA,sDAAA,tDAASA;;AAAT,CAAA,2DAAA,WAAAJ,mBAAAC,qBAAAC,9GAASE;AAAT,AAAA,OAAAD,iBAAAF,qBAAA;;;AAAA;;;yCAAA,zCAASI,0FAAYC,IAAIC,SAASC;AAAlC,AAAA,YAAAJ,kCAAqBE,IAAIC,SAASC;;;AAAzBJ,AAsBT,AAAA;;;;;;;;;AAAA,AAAA,CAAA,AAAA,oFAAAL,pFAASY;;AAAT,CAAA,AAAA,sGAAA,tGAASA,iHAEMF,MAAKH;;AAFpB,AAAA,gBAAA,ZAEeG;AAFf,AAGI,YAAAL,kCACEE,IACAC,gBACA,iBAAAe,WAAM,AAACC,oCAAoBjB;AAA3B,AAAA,AAAAgB,2EACcD;;AADdC;;;;AANN,CAAA,6CAAA,7CAASX;AAAT,AAAA,AAAA;;;AAAA,CAAA,mDAAA,nDAASA;;AAAT,CAAA,sDAAA,tDAASA;;AAAT,CAAA,2DAAA,WAAAX,mBAAAC,qBAAAC,9GAASS;AAAT,AAAA,OAAAR,iBAAAF,qBAAA;;;AAAA;;;yCAAA,zCAASmB,0FAAYb,SAASc;AAA9B,AAAA,YAAAV,kCAAqBJ,SAASc;;;AAArBV,AAST,gCAAA,hCAAMa,wEAAQjB,SAASc;AAAvB,AACE,YAAAV,kCAAaJ,SAASc","names":["cljs.core/PROTOCOL_SENTINEL","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","shadow.grove.ui.portal/PortalNode","shadow.grove.ui.portal/->PortalNode","env","ref-node","root","this","next","shadow.grove.ui.portal/PortalSeed","shadow.arborist.protocols/update!","parent","anchor","shadow.arborist.protocols/dom-insert","shadow.arborist.protocols/dom-first","shadow.arborist.protocols/dom-entered!","dom-remove?","shadow.arborist.protocols/destroy!","shadow.grove.ui.portal/->PortalSeed","body","G__11886","shadow.arborist.common/managed-root","shadow.grove.ui.portal/portal"],"sourcesContent":["(ns shadow.grove.ui.portal\n  (:require\n    [shadow.arborist.protocols :as ap]\n    [shadow.arborist.common :as common]))\n\n(declare PortalSeed)\n\n(deftype PortalNode [env ref-node root]\n  ap/IManaged\n  (supports? [this ^PortalSeed next]\n    (and (instance? PortalSeed next)\n         (identical? ref-node (.-ref-node next))))\n\n  (dom-sync! [this ^PortalSeed next]\n    (ap/update! root (.-body next)))\n\n  (dom-insert [this parent anchor]\n    (ap/dom-insert root ref-node nil))\n\n  (dom-first [this]\n    (ap/dom-first root))\n\n  (dom-entered! [this]\n    (ap/dom-entered! root))\n\n  (destroy! [this ^boolean dom-remove?]\n    ;; always dom-remove? true since the root is a child of the ref-node not the parent\n    (ap/destroy! root true)))\n\n(deftype PortalSeed [ref-node body]\n  ap/IConstruct\n  (as-managed [this env]\n    (PortalNode.\n      env\n      ref-node\n      (doto (common/managed-root env)\n        (ap/update! body)))))\n\n(defn portal [ref-node body]\n  (PortalSeed. ref-node body))\n"]}